{"ast":null,"code":"import React,{Fragment,useEffect,useState}from\"react\";import{DataGrid}from\"@material-ui/data-grid\";import\"./ProductReviews.css\";import{useSelector,useDispatch}from\"react-redux\";import{clearErrors,getAllReviews,deleteReviews}from\"../../actions/productAction\";import{useAlert}from\"react-alert\";import{Button}from\"@material-ui/core\";import MetaData from\"../layout/MetaData\";import DeleteIcon from\"@material-ui/icons/Delete\";import Star from\"@material-ui/icons/Star\";import Sidebar from\"./Sidebar\";import{DELETE_REVIEW_RESET}from\"../../constants/productConstants\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductReviews=()=>{const dispatch=useDispatch();const navigate=useNavigate();const alert=useAlert();const{error:deleteError,isDeleted}=useSelector(state=>state.review);const{error,reviews,loading}=useSelector(state=>state.productReviews);const[productId,setProductId]=useState(\"\");const deleteReviewHandler=reviewId=>{dispatch(deleteReviews(reviewId,productId));};const productReviewsSubmitHandler=e=>{e.preventDefault();dispatch(getAllReviews(productId));};useEffect(()=>{if(productId.length===24){dispatch(getAllReviews(productId));}if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success(\"Reviews Deleted Successfully\");navigate(\"/admin/dashboard\");dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,deleteError,navigate,isDeleted,productId]);const columns=[{field:\"id\",headerName:\"Review ID\",minWidth:150,flex:0.5},{field:\"user\",headerName:\"User\",minWidth:200,flex:0.6},{field:\"comment\",headerName:\"Comment\",minWidth:100,flex:1},{field:\"rating\",headerName:\"Rating\",type:\"number\",minWidth:180,flex:0.4,cellClassName:params=>{return params.getValue(params.id,\"rating\")>=3?\"greenColor\":\"redColor\";}},{field:\"actions\",flex:0.3,headerName:\"Actions\",minWidth:150,type:\"number\",sortable:false,renderCall:params=>{return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>deleteReviewHandler(params.getValue(params.id,\"id\")),children:/*#__PURE__*/_jsx(DeleteIcon,{})})});}}];const rows=[];reviews&&reviews.forEach(item=>{rows.push({id:item._id,rating:item.rating,comment:item.comment,user:item.name});});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"ALL REVIEWS -Admin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"productReviewsContainer\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"productReviewsForm\",encType:\"multipart/form-data\",onSubmit:productReviewsSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"ALL REVIEWS\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Star,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product Id\",required:true,value:productId,onChange:e=>setProductId(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:loading?true:false||productId===\"\"?true:false,children:\"Search\"})]}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(DataGrid,{rows:rows,columns:columns,pageSize:10,disableSelectionOnClick:true,className:\"productListTable\",autoHeight:true}):/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"No Reviews Found\"})]})]})]});};export default ProductReviews;","map":{"version":3,"names":["React","Fragment","useEffect","useState","DataGrid","useSelector","useDispatch","clearErrors","getAllReviews","deleteReviews","useAlert","Button","MetaData","DeleteIcon","Star","Sidebar","DELETE_REVIEW_RESET","useNavigate","jsx","_jsx","jsxs","_jsxs","ProductReviews","dispatch","navigate","alert","error","deleteError","isDeleted","state","review","reviews","loading","productReviews","productId","setProductId","deleteReviewHandler","reviewId","productReviewsSubmitHandler","e","preventDefault","length","success","type","columns","field","headerName","minWidth","flex","cellClassName","params","getValue","id","sortable","renderCall","children","onClick","rows","forEach","item","push","_id","rating","comment","user","name","title","className","encType","onSubmit","placeholder","required","value","onChange","target","disabled","pageSize","disableSelectionOnClick","autoHeight"],"sources":["C:/Users/anant/OneDrive/Desktop/Project/Coir-Grow/frontend/src/component/admin/ProductReviews.js"],"sourcesContent":["import React, { Fragment, useEffect, useState} from \"react\";\r\nimport { DataGrid } from \"@material-ui/data-grid\";\r\nimport \"./ProductReviews.css\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {clearErrors, getAllReviews, deleteReviews} from \"../../actions/productAction\";  \r\nimport { useAlert } from \"react-alert\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport MetaData from \"../layout/MetaData\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Star from \"@material-ui/icons/Star\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport { DELETE_REVIEW_RESET } from \"../../constants/productConstants\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst ProductReviews = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    \r\n    const alert = useAlert();\r\n\r\n    const { error: deleteError, isDeleted } = useSelector(\r\n        (state) => state.review);\r\n\r\n    const {error, reviews, loading} = useSelector((state) => state.productReviews);\r\n\r\n    const [productId, setProductId] = useState(\"\");    \r\n\r\n    const deleteReviewHandler =(reviewId) =>{\r\n        dispatch(deleteReviews(reviewId, productId));\r\n    }\r\n\r\n    const productReviewsSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        dispatch(getAllReviews(productId))\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(productId.length === 24){\r\n            dispatch(getAllReviews(productId))    \r\n        }\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (deleteError) {\r\n        alert.error(deleteError);\r\n        dispatch(clearErrors());\r\n        }\r\n\r\n        if (isDeleted) {\r\n            alert.success(\"Reviews Deleted Successfully\");\r\n            navigate(\"/admin/dashboard\");\r\n            dispatch({ type: DELETE_REVIEW_RESET });\r\n        }\r\n\r\n    }, [dispatch, alert, error, deleteError, navigate, isDeleted, productId ]);\r\n\r\n    const columns = [\r\n        { field: \"id\", headerName: \"Review ID\", minWidth: 150, flex:0.5 },\r\n\r\n        {\r\n            field: \"user\",\r\n            headerName : \"User\",\r\n            minWidth: 200,\r\n            flex: 0.6,\r\n        },\r\n        {\r\n            field: \"comment\",\r\n            headerName : \"Comment\",\r\n            minWidth: 100,\r\n            flex: 1,\r\n        },\r\n        {\r\n            field: \"rating\",\r\n            headerName : \"Rating\",\r\n            type:\"number\",\r\n            minWidth: 180,\r\n            flex: 0.4,\r\n\r\n            cellClassName: (params) => {\r\n                return params.getValue(params.id, \"rating\") >= 3\r\n                ? \"greenColor\"\r\n                : \"redColor\";\r\n            },\r\n        },\r\n        {\r\n            field: \"actions\",\r\n            flex: 0.3,\r\n            headerName: \"Actions\",\r\n            minWidth: 150,\r\n            type: \"number\",\r\n            sortable: false,\r\n            renderCall: (params) =>{\r\n                return (\r\n                    <Fragment>\r\n                   <Button \r\n                   onClick={()=>\r\n                   deleteReviewHandler(params.getValue(params.id, \"id\"))\r\n                   }>\r\n                    <DeleteIcon />\r\n                   </Button>\r\n                    </Fragment>\r\n                )\r\n            }\r\n        }\r\n    ];\r\n\r\n   const rows = [];\r\n\r\n   reviews &&\r\n     reviews.forEach((item) => {\r\n        rows.push({\r\n            id: item._id,\r\n            rating: item.rating,\r\n            comment: item.comment,\r\n            user: item.name,\r\n        });\r\n     });\r\n\r\n    return (<Fragment>\r\n        <MetaData title={`ALL REVIEWS -Admin`} />\r\n            \r\n        <div className=\"dashboard\">\r\n        <Sidebar />\r\n        <div className=\"productReviewsContainer\">\r\n\r\n        <form\r\n           className=\"productReviewsForm\"\r\n           encType=\"multipart/form-data\"\r\n           onSubmit={productReviewsSubmitHandler}\r\n           >\r\n           <h1 className=\"productReviewsFormHeading\">ALL REVIEWS</h1>\r\n\r\n           <div>\r\n            <Star />\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Product Id\"\r\n                required\r\n                value={productId}\r\n                onChange={(e) => setProductId(e.target.value)}\r\n            />\r\n           </div>\r\n\r\n           <Button\r\n             id=\"createProductBtn\"\r\n             type=\"submit\"\r\n             disabled={loading ? true: false || productId ===\"\" ? true : false}\r\n           >\r\n            Search \r\n           </Button>\r\n           </form>\r\n\r\n      {reviews && reviews.length > 0 ?\r\n        <DataGrid\r\n            rows={rows}\r\n            columns={columns}\r\n            pageSize={10}\r\n            disableSelectionOnClick\r\n            className=\"productListTable\"\r\n            autoHeight\r\n          /> :  <h1 className=\"productReviewsFormHeading\">\r\n            No Reviews Found\r\n          </h1>\r\n      }\r\n\r\n        </div>\r\n        </div>\r\n    </Fragment>\r\n    );\r\n};\r\n\r\nexport default ProductReviews;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}