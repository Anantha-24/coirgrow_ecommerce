{"ast":null,"code":"import React,{Fragment,useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{useAlert}from\"react-alert\";import{Button}from\"@material-ui/core\";import MetaData from\"../layout/MetaData\";import MailOutlineIcon from\"@material-ui/icons/MailOutline\";import PersonIcon from\"@material-ui/icons/Person\";import VerifiedUserIcon from\"@material-ui/icons/VerifiedUser\";import Sidebar from\"./Sidebar\";import{UPDATE_USER_RESET}from\"../../constants/userConstants\";import{getUserDetails,updateUser,clearErrors}from\"../../actions/userAction\";import Loader from\"../layout/Loader/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UpdateUser=_ref=>{let{match}=_ref;const dispatch=useDispatch();const alert=useAlert();const navigate=useNavigate();const{loading,error,user}=useSelector(state=>state.userDetails);const{loading:updateLoading,error:updateError,isUpdated}=useSelector(state=>state.profile);const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[role,setRole]=useState(\"\");// const userId = match.params.id;\nconst userId=match&&match.params&&match.params.id;useEffect(()=>{if(user&&user._id!==userId){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setRole(user.role);}if(error){alert.error(error);dispatch(clearErrors());}if(updateError){alert.error(updateError);dispatch(clearErrors());}if(isUpdated){alert.success(\"User Updated Successfully\");navigate(\"/admin/users\");dispatch({type:UPDATE_USER_RESET});}},[dispatch,alert,error,navigate,isUpdated,updateError,user,userId]);const updateUserSubmitHandler=e=>{e.preventDefault();const myForm=new FormData();myForm.set(\"name\",name);myForm.set(\"email\",email);myForm.set(\"role\",role);dispatch(updateUser(userId,myForm));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"newProductContainer\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"form\",{className:\"createProductForm\",encType:\"multipart/form-data\",onSubmit:updateUserSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PersonIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",required:true,value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MailOutlineIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(VerifiedUserIcon,{}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:e=>setRole(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Role\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"})]})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:updateLoading?true:false||role===\"\"?true:false,children:\"Update\"})]})})]})]});};export default UpdateUser;","map":{"version":3,"names":["React","Fragment","useEffect","useState","useSelector","useDispatch","useNavigate","useAlert","Button","MetaData","MailOutlineIcon","PersonIcon","VerifiedUserIcon","Sidebar","UPDATE_USER_RESET","getUserDetails","updateUser","clearErrors","Loader","jsx","_jsx","jsxs","_jsxs","UpdateUser","_ref","match","dispatch","alert","navigate","loading","error","user","state","userDetails","updateLoading","updateError","isUpdated","profile","name","setName","email","setEmail","role","setRole","userId","params","id","_id","success","type","updateUserSubmitHandler","e","preventDefault","myForm","FormData","set","children","title","className","encType","onSubmit","placeholder","required","value","onChange","target","disabled"],"sources":["C:/Users/anant/OneDrive/Desktop/Project/Coir-Grow/frontend/src/component/admin/UpdateUser.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAlert } from \"react-alert\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport MetaData from \"../layout/MetaData\";\r\nimport MailOutlineIcon from \"@material-ui/icons/MailOutline\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport { UPDATE_USER_RESET } from \"../../constants/userConstants\";\r\nimport { getUserDetails, updateUser, clearErrors} from \"../../actions/userAction\";\r\nimport Loader from \"../layout/Loader/Loader\";\r\n\r\n\r\nconst UpdateUser = ({match}) => {\r\n    const dispatch = useDispatch();\r\n    const alert = useAlert();\r\n    const navigate = useNavigate();\r\n   \r\n\r\n    const { loading, error, user } = useSelector((state) => state.userDetails);\r\n    \r\n    const { \r\n        loading: updateLoading,\r\n        error: updateError,\r\n        isUpdated } = useSelector((state) => state.profile);\r\n    \r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [role, setRole] = useState(\"\");\r\n\r\n   // const userId = match.params.id;\r\n   const userId = match && match.params && match.params.id;\r\n    \r\n    useEffect(() => {\r\n\r\n        if (user && user._id !== userId){\r\n            dispatch(getUserDetails(userId));\r\n          } else {\r\n            setName(user.name);\r\n            setEmail(user.email);\r\n            setRole(user.role);\r\n           \r\n          }\r\n\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (updateError) {\r\n            alert.error(updateError);\r\n            dispatch(clearErrors());\r\n        }\r\n        \r\n        if (isUpdated) {\r\n            alert.success(\"User Updated Successfully\");\r\n            navigate(\"/admin/users\");\r\n            dispatch({ type: UPDATE_USER_RESET });\r\n        }\r\n\r\n    },[dispatch, alert, error, navigate, isUpdated, updateError, user, userId]);\r\n\r\n    const updateUserSubmitHandler = (e) =>{\r\n        e.preventDefault();\r\n\r\n        const myForm = new FormData();\r\n\r\n        myForm.set(\"name\", name);\r\n        myForm.set(\"email\", email);\r\n        myForm.set(\"role\", role);\r\n   \r\n        dispatch(updateUser(userId, myForm));\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n        <MetaData title=\"Update User\"/>\r\n        <div className=\"dashboard\">\r\n        <Sidebar />\r\n        <div className=\"newProductContainer\">\r\n       {loading?(<Loader/>) :( \r\n         <form\r\n           className=\"createProductForm\"\r\n           encType=\"multipart/form-data\"\r\n           onSubmit={updateUserSubmitHandler}\r\n           >\r\n           <h1>Update User</h1>\r\n\r\n           <div>\r\n            <PersonIcon />\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Name\"\r\n                required\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n            />\r\n           </div>\r\n\r\n           <div>\r\n            <MailOutlineIcon/>\r\n            <input \r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n           </div>\r\n\r\n           <div>\r\n           <VerifiedUserIcon />\r\n             <select value={role} onChange={(e) => setRole(e.target.value)}>\r\n              <option value=\"\">Choose Role</option>\r\n              <option value=\"admin\">Admin</option>\r\n              <option value=\"user\">User</option>\r\n            \r\n             </select>\r\n           </div>\r\n\r\n           <Button\r\n             id=\"createProductBtn\"\r\n             type=\"submit\"\r\n             disabled={updateLoading ? true: false || role===\"\" ? true : false}\r\n           >\r\n           Update \r\n           </Button>\r\n           </form>\r\n        )}\r\n        </div>\r\n        </div>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default UpdateUser;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}